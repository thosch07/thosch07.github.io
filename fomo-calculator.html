<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOMO Score Test - Trading Psychology Tool</title>
    <meta name="description" content="Free educational tool to assess your FOMO (Fear of Missing Out) levels in trading. Get personalized insights in 2 minutes.">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T09F68TQVW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T09F68TQVW');
    </script>
    
    <!-- MailerLite Universal -->
    <script>
        (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[])
        .push(arguments);},l=d.createElement(e),l.async=1,l.src=u,
        n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
        (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
        ml('account', '1568323');
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1f2e 0%, #0f1419 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 0;
            animation: fadeInDown 0.8s ease;
        }

        h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: #8899a6;
            margin-bottom: 30px;
        }

        .warning-banner {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 0.9em;
            color: #fca5a5;
        }

        .quiz-container, .results-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-top: 20px;
            animation: fadeIn 0.8s ease;
        }

        .question-number {
            color: #3b82f6;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.4em;
            margin-bottom: 30px;
            color: #fff;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid transparent;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            position: relative;
            overflow: hidden;
        }

        .option:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .option:hover {
            border-color: #3b82f6;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
        }

        .option:hover:before {
            left: 100%;
        }

        .option.selected {
            background: rgba(59, 130, 246, 0.15);
            border-color: #3b82f6;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #0ea5e9);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #8899a6;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-container {
            display: none;
            text-align: center;
        }

        .fomo-score {
            font-size: 5em;
            font-weight: 800;
            margin: 20px 0;
            background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .fomo-category {
            font-size: 2em;
            color: #3b82f6;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .fomo-description {
            font-size: 1.2em;
            line-height: 1.8;
            color: #e0e0e0;
            margin: 20px 0;
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
        }

        .recommendations {
            text-align: left;
            margin: 30px 0;
        }

        .recommendation-item {
            background: rgba(59, 130, 246, 0.1);
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
        }

        .recommendation-item h3 {
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .cta-section {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(14, 165, 233, 0.2) 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .cta-section h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #fff;
        }

        .download-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
            margin: 20px 0;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        footer {
            text-align: center;
            padding: 40px 0;
            color: #8899a6;
            font-size: 0.9em;
        }

        footer a {
            color: #3b82f6;
            text-decoration: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MailerLite Form Integration Styles */
        #mlb2-27668853.ml-form-embedContainer {
            background: transparent !important;
            margin: 20px auto !important;
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-embedWrapper {
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(10px);
            border-radius: 15px !important;
            padding: 30px !important;
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-embedContent h4 {
            color: #3b82f6 !important;
            font-size: 24px !important;
            margin-bottom: 15px !important;
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-embedContent p {
            color: #a0a0a0 !important;
            font-size: 16px !important;
        }

        #mlb2-27668853.ml-form-embedContainer input[type="email"] {
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            color: #fff !important;
            padding: 15px !important;
            font-size: 16px !important;
            border-radius: 10px !important;
        }

        #mlb2-27668853.ml-form-embedContainer input[type="email"]::placeholder {
            color: #a0a0a0 !important;
        }

        #mlb2-27668853.ml-form-embedContainer button[type="submit"] {
            background: linear-gradient(135deg, #3b82f6 0%, #0ea5e9 100%) !important;
            color: #fff !important;
            font-weight: 700 !important;
            padding: 15px 30px !important;
            font-size: 16px !important;
            border-radius: 50px !important;
            border: none !important;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #mlb2-27668853.ml-form-embedContainer button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-successContent {
            color: #3b82f6 !important;
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-successContent h4 {
            color: #3b82f6 !important;
            font-size: 24px !important;
            margin-bottom: 15px !important;
        }

        #mlb2-27668853.ml-form-embedContainer .ml-form-successContent p {
            color: #fff !important;
            font-size: 16px !important;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            .quiz-container, .results-container { padding: 20px; }
            .option { padding: 15px; font-size: 1em; }
            .fomo-score { font-size: 4em; }
        }
    </style>
    
    <!-- MailerLite Form Styles -->
    <style type="text/css">@import url("https://assets.mlcdn.com/fonts.css?version=1750852");</style>
    <style type="text/css">
    /* LOADER */
    .ml-form-embedSubmitLoad {
      display: inline-block;
      width: 20px;
      height: 20px;
    }

    .g-recaptcha {
    transform: scale(1);
    -webkit-transform: scale(1);
    transform-origin: 0 0;
    -webkit-transform-origin: 0 0;
    height: ;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    }

    .ml-form-embedSubmitLoad:after {
      content: " ";
      display: block;
      width: 11px;
      height: 11px;
      margin: 1px;
      border-radius: 50%;
      border: 4px solid #fff;
    border-color: #ffffff #ffffff #ffffff transparent;
    animation: ml-form-embedSubmitLoad 1.2s linear infinite;
    }
    @keyframes ml-form-embedSubmitLoad {
      0% {
      transform: rotate(0deg);
      }
      100% {
      transform: rotate(360deg);
      }
    }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FOMO Score Test</h1>
            <p class="subtitle">Discover Your Fear of Missing Out Level in Trading</p>
        </header>

        <div class="warning-banner">
            ⚠️ Educational Tool Only - Not Financial Advice. Trading involves substantial risk of loss.
        </div>

        <div class="quiz-container" id="quizContainer">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <div id="questionSection">
                <div class="question-number" id="questionNumber">Question 1 of 8</div>
                <h2 class="question" id="questionText"></h2>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div class="button-container">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
            </div>
        </div>

        <div class="results-container" id="resultsContainer">
            <h2>Your FOMO Score</h2>
            <div class="fomo-score" id="fomoScore">0</div>
            <div class="fomo-category" id="fomoCategory"></div>
            <div class="fomo-description" id="fomoDescription"></div>
            
            <div class="recommendations" id="recommendations"></div>
            
            <div class="cta-section">
                <h3>📈 Want to Master Your FOMO?</h3>
                <p>Get your personalized FOMO Management Guide with:</p>
                <ul style="list-style: none; text-align: left; display: inline-block; margin: 20px 0;">
                    <li>✓ Detailed analysis of your FOMO triggers</li>
                    <li>✓ Custom 30-day improvement plan</li>
                    <li>✓ FOMO-proof trading checklist</li>
                    <li>✓ Emergency protocols for high-FOMO moments</li>
                    <li>✓ Access to FOMO tracking tools</li>
                </ul>
                
                <!-- MailerLite Form Integration -->
                <div id="mlb2-27668853" class="ml-form-embedContainer ml-subscribe-form ml-subscribe-form-27668853">
                  <div class="ml-form-align-center ">
                    <div class="ml-form-embedWrapper embedForm">
                      <div class="ml-form-embedBody ml-form-embedBodyDefault row-form">
                        <div class="ml-form-embedContent" style=" ">
                            <h4>Get Your Free FOMO Guide</h4>
                            <p>Enter your email to receive your personalized guide</p>
                        </div>

                        <form class="ml-block-form" action="https://assets.mailerlite.com/jsonp/1568323/forms/158237970273404824/subscribe" data-code="" method="post" target="_blank">
                          <div class="ml-form-formContent">
                              <div class="ml-form-fieldRow ml-last-item">
                                <div class="ml-field-group ml-field-email ml-validate-email ml-validate-required">
                                  <input aria-label="email" aria-required="true" type="email" class="form-control" data-inputmask="" name="fields[email]" placeholder="Enter your email" autocomplete="email" id="mailerliteEmailInput">
                                </div>
                              </div>
                          </div>

                          <input type="hidden" name="ml-submit" value="1">

                          <div class="ml-form-embedSubmit">
                              <button type="submit" class="primary" onclick="return handleMailerLiteSubmit()">Download Your FOMO Guide (Free)</button>
                            <button disabled="disabled" style="display: none;" type="button" class="loading">
                              <div class="ml-form-embedSubmitLoad"></div>
                              <span class="sr-only">Loading...</span>
                            </button>
                          </div>

                          <input type="hidden" name="anticsrf" value="true">
                        </form>
                      </div>

                      <div class="ml-form-successBody row-success" style="display: none">
                        <div class="ml-form-successContent">
                            <h4>Thank you!</h4>
                            <p>Your FOMO guide has been sent to your email. Check your inbox!</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            
            <button class="btn btn-secondary" onclick="retakeQuiz()">Retake Quiz</button>
            
            <div style="margin-top: 30px;">
                <a href="/assessment.html" style="color: #3b82f6; text-decoration: none;">
                    → Try our complete Trading Psychology Assessment
                </a>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2025 Schnitzlein Consulting | Educational Tool Only</p>
        <p>
            <a href="https://schnitzleinconsulting.com/impressum" target="_blank">Impressum</a> |
            <a href="https://schnitzleinconsulting.com/datenschutz" target="_blank">Datenschutz</a>
        </p>
    </footer>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- MailerLite Script -->
    <script src="https://groot.mailerlite.com/js/w/webforms.min.js?v176e10baa5e7ed80d35ae235be3d5024" type="text/javascript"></script>

    <script>
        // FOMO Quiz Questions
        const questions = [
            {
                question: "When you see others posting their winning trades on social media, you:",
                options: [
                    { text: "Immediately look for similar trades to enter", value: 5 },
                    { text: "Feel anxious but try to stick to your plan", value: 3 },
                    { text: "Analyze their setup for learning purposes only", value: 1 },
                    { text: "Ignore it and focus on your own strategy", value: 0 }
                ]
            },
            {
                question: "A stock you've been watching suddenly jumps 10%. Your reaction:",
                options: [
                    { text: "Buy immediately before it goes higher", value: 5 },
                    { text: "Feel frustrated but wait for a pullback", value: 3 },
                    { text: "Check if your entry criteria are still valid", value: 1 },
                    { text: "Move on to the next opportunity", value: 0 }
                ]
            },
            {
                question: "How often do you check your watchlist outside trading hours?",
                options: [
                    { text: "Constantly throughout the day", value: 5 },
                    { text: "Several times after market close", value: 3 },
                    { text: "Once in the evening for planning", value: 1 },
                    { text: "Only during designated planning time", value: 0 }
                ]
            },
            {
                question: "When a trade idea doesn't trigger your entry, you:",
                options: [
                    { text: "Lower your standards to get in", value: 5 },
                    { text: "Feel like you're missing out on profits", value: 3 },
                    { text: "Document why it didn't qualify", value: 1 },
                    { text: "Feel confident in your discipline", value: 0 }
                ]
            },
            {
                question: "Your friend mentions a 'hot tip' stock. You:",
                options: [
                    { text: "Buy some immediately just in case", value: 5 },
                    { text: "Research it urgently worried you'll miss out", value: 3 },
                    { text: "Add it to your watchlist for analysis", value: 1 },
                    { text: "Thank them but stick to your process", value: 0 }
                ]
            },
            {
                question: "During market volatility, you find yourself:",
                options: [
                    { text: "Trading more frequently to catch moves", value: 5 },
                    { text: "Feeling pressured to be in the market", value: 3 },
                    { text: "Being more selective with entries", value: 1 },
                    { text: "Reducing position size or staying out", value: 0 }
                ]
            },
            {
                question: "When you miss a profitable trade setup, you:",
                options: [
                    { text: "Chase the trade at a worse price", value: 5 },
                    { text: "Feel significant regret and frustration", value: 3 },
                    { text: "Note it and wait for the next setup", value: 1 },
                    { text: "Know another opportunity will come", value: 0 }
                ]
            },
            {
                question: "How do market news and alerts affect you?",
                options: [
                    { text: "I act on them immediately", value: 5 },
                    { text: "They make me anxious about missing moves", value: 3 },
                    { text: "I consider them in my analysis", value: 1 },
                    { text: "I check them at scheduled times only", value: 0 }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let selectedOption = null;

        // Quiz state
        const quizResult = {
            score: 0,
            category: '',
            description: '',
            recommendations: []
        };

        // MailerLite Configuration
        const MAILERLITE_CONFIG = {
            apiKey: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI0IiwianRpIjoiMWI0MDljMDMxZTViNjI5M2EyOWM3MjkzMTA4ZDFmN2M3NmYwMjczNTU3NGI1NmFhYjVjZGY3ZDljOGQ3NGIxNDhjMDI0MTU0ZTcwNTMwNzciLCJpYXQiOjE3NDk3MzI3ODEuMjk1NzcyLCJuYmYiOjE3NDk3MzI3ODEuMjk1Nzc2LCJleHAiOjQ5MDU0MDYzODEuMjg5ODI2LCJzdWIiOiIxNTgxMjY5Iiwic2NvcGVzIjpbXX0.g64vCpQu8KxSIqctKKk03QyBKhgmEF6sfyN6rl68FraHRFRN1VbgCl-EgXXeo6aWUsW3PKotGcdbB0QXoi7Do21z6VQ7YctLspe8kyriSYILMV7k53zXgoxXe24puXA8bclXCsPaIO1uNepwZXNDAWaMHjY6DF9hdwFEh3ZedjnAB535UGzzU37wd-jQod_oVmbQznaRSyoWPz3JKMHgG345TZqgUdfLsrrm4zKdzJWWKfKVgxo7BoTKKrQhcBbRC3uRs3fTOQU9E_2D1HRDXFGhcHBwF5V3W973q8g9ADdXBw6zCIOvRrT88s7RvWUtOaEIn7s-_PqhXk4Y6KklunyFPzTccD6TzdOG5vTJnt3kfVGClTR1JcbnlBSzRsl2fXLoKlNQWKl5ectJvJ33snMlc2xBv4LmnrXKqGJOQB93YTOHuqLE6swJTZLDlVC2TibGOh4MejZDgDUNI8hQo1eCniLJ7JlJ1nbBcZo-6tkBF6PZhDeagQioajoR8nQTQ_kt1TBBn1l9uJbCJnPajDlYamLNfvcD-8JwJltWRIkCkUNqTmPKHmDo4w6-rq97-yww9untRWuFvKU-z59WA1C9_lCldf--X9zBHJj69i7rIgM_Hx9STXCOd5sa4WjsnmXkKE0RcqhKE_oujxzta5NujlgwpZPCCmTzw6GBgWs',
            apiUrl: 'https://connect.mailerlite.com/api',
            fomoGroupId: '156165764502521533' // Create a specific group for FOMO tool users
        };

        // Initialize quiz
        function initQuiz() {
            showQuestion();
            gtag('event', 'quiz_start', {
                'event_category': 'FOMO Quiz',
                'event_label': 'Start'
            });
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option.text;
                optionElement.onclick = () => selectAnswer(index);
                
                if (answers[currentQuestion] === index) {
                    optionElement.classList.add('selected');
                }
                
                optionsContainer.appendChild(optionElement);
            });
            
            updateProgress();
            updateButtons();
        }

        function selectAnswer(index) {
            selectedOption = index;
            answers[currentQuestion] = index;
            
            // Update visual selection
            document.querySelectorAll('.option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === index);
            });
            
            document.getElementById('nextBtn').disabled = false;
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = answers[currentQuestion] === undefined;
            
            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Get Results';
            } else {
                document.getElementById('nextBtn').textContent = 'Next';
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                calculateResults();
            }
        }

        function calculateResults() {
            // Calculate total score
            let totalScore = 0;
            answers.forEach((answerIndex, questionIndex) => {
                totalScore += questions[questionIndex].options[answerIndex].value;
            });
            
            // Normalize to 0-100 scale
            const maxScore = questions.length * 5;
            quizResult.score = Math.round((totalScore / maxScore) * 100);
            
            // Determine category and recommendations
            if (quizResult.score >= 75) {
                quizResult.category = "FOMO Master";
                quizResult.description = "Your FOMO levels are dangerously high. You're letting emotions drive your trading decisions, chasing moves, and likely overtrading. This reactive approach is probably costing you money and increasing stress.";
                quizResult.recommendations = [
                    {
                        title: "Implement a Cooling-Off Period",
                        description: "Wait at least 30 minutes before entering any trade you didn't plan in advance."
                    },
                    {
                        title: "Create a FOMO Journal",
                        description: "Document every time you feel FOMO and what triggered it. Review weekly to identify patterns."
                    },
                    {
                        title: "Set Daily Trade Limits",
                        description: "Limit yourself to 2-3 trades per day maximum to reduce impulsive decisions."
                    }
                ];
            } else if (quizResult.score >= 50) {
                quizResult.category = "FOMO Fighter";
                quizResult.description = "You experience significant FOMO that impacts your trading decisions. While you try to maintain discipline, emotions often win, leading to suboptimal entries and exits.";
                quizResult.recommendations = [
                    {
                        title: "Pre-Market Planning",
                        description: "Write down your exact trade setups before the market opens and stick to them."
                    },
                    {
                        title: "Use Alerts Instead of Watching",
                        description: "Set price alerts and step away from the screen to reduce emotional reactions."
                    },
                    {
                        title: "Practice Meditation",
                        description: "5 minutes of breathing exercises before trading can significantly reduce FOMO."
                    }
                ];
            } else if (quizResult.score >= 25) {
                quizResult.category = "FOMO Controller";
                quizResult.description = "You have good awareness of FOMO and generally manage it well. Occasional slips happen, but you're developing strong emotional discipline.";
                quizResult.recommendations = [
                    {
                        title: "Refine Your Process",
                        description: "Document what works in controlling FOMO and make it part of your routine."
                    },
                    {
                        title: "Mentor Others",
                        description: "Teaching others about FOMO control will reinforce your own discipline."
                    },
                    {
                        title: "Track Success Rate",
                        description: "Monitor how often patience pays off vs. FOMO-driven trades."
                    }
                ];
            } else {
                quizResult.category = "FOMO Zen Master";
                quizResult.description = "Exceptional FOMO control! You've mastered the ability to remain calm and stick to your plan regardless of market noise. This discipline is a key trait of successful traders.";
                quizResult.recommendations = [
                    {
                        title: "Stay Vigilant",
                        description: "Even masters can slip. Continue your disciplined approach."
                    },
                    {
                        title: "Share Your Wisdom",
                        description: "Consider creating content about your FOMO management techniques."
                    },
                    {
                        title: "Explore Advanced Strategies",
                        description: "Your emotional control allows for more sophisticated trading approaches."
                    }
                ];
            }
            
            showResults();
        }

        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            // Display results
            document.getElementById('fomoScore').textContent = quizResult.score;
            document.getElementById('fomoCategory').textContent = quizResult.category;
            document.getElementById('fomoDescription').textContent = quizResult.description;
            
            // Display recommendations
            const recommendationsHTML = quizResult.recommendations.map(rec => `
                <div class="recommendation-item">
                    <h3>${rec.title}</h3>
                    <p>${rec.description}</p>
                </div>
            `).join('');
            document.getElementById('recommendations').innerHTML = recommendationsHTML;
            
            // Track completion
            gtag('event', 'quiz_complete', {
                'event_category': 'FOMO Quiz',
                'event_label': quizResult.category,
                'value': quizResult.score
            });
            
            // Save for MailerLite
            window.quizResult = quizResult;
        }

        function retakeQuiz() {
            currentQuestion = 0;
            answers = [];
            selectedOption = null;
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';
            document.getElementById('nextBtn').textContent = 'Next';
            showQuestion();
        }

        // MailerLite form submission handler
        function handleMailerLiteSubmit() {
            const email = document.getElementById('mailerliteEmailInput').value;
            if (email && window.quizResult) {
                // Generate and download PDF immediately
                generatePDF();
                
                // Add to MailerLite via API
                addToMailerLiteAPI(email, window.quizResult.score, window.quizResult.category);
            }
            return true; // Allow form submission
        }

        // Add to MailerLite API
        async function addToMailerLiteAPI(email, score, category) {
            try {
                const response = await fetch(`${MAILERLITE_CONFIG.apiUrl}/subscribers`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'Authorization': `Bearer ${MAILERLITE_CONFIG.apiKey}`
                    },
                    body: JSON.stringify({
                        email: email,
                        groups: [MAILERLITE_CONFIG.fomoGroupId],
                        fields: {
                            fomo_score: score,
                            fomo_category: category,
                            test_date: new Date().toISOString(),
                            tool_source: 'fomo_test'
                        }
                    })
                });

                if (response.ok) {
                    console.log('✅ Successfully added to MailerLite');
                    gtag('event', 'generate_lead', {
                        'value': score,
                        'currency': 'USD'
                    });
                }
            } catch (error) {
                console.error('MailerLite API error:', error);
            }
        }

        // MailerLite form success callback
        function ml_webform_success_27668853() {
            var $ = ml_jQuery || jQuery;
            $('.ml-subscribe-form-27668853 .row-success').show();
            $('.ml-subscribe-form-27668853 .row-form').hide();
        }

        // PDF Generation
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Colors
            const blue = [59, 130, 246];
            const lightBlue = [224, 242, 254];
            const darkBlue = [30, 64, 175];
            
            // Cover page
            doc.setFillColor(...darkBlue);
            doc.rect(0, 0, 210, 297, 'F');
            
            // Title
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(36);
            doc.setFont(undefined, 'bold');
            doc.text('FOMO Management', 105, 60, { align: 'center' });
            doc.setFontSize(24);
            doc.setFont(undefined, 'normal');
            doc.text('Personal Trading Guide', 105, 80, { align: 'center' });
            
            // Score circle
            doc.setDrawColor(...blue);
            doc.setLineWidth(5);
            doc.circle(105, 130, 25, 'S');
            
            doc.setFontSize(32);
            doc.setFont(undefined, 'bold');
            doc.text(`${quizResult.score}`, 105, 140, { align: 'center' });
            
            // Category
            doc.setFontSize(20);
            doc.text(quizResult.category, 105, 170, { align: 'center' });
            
            // Add pages with content
            doc.addPage();
            
            // Your FOMO Profile
            doc.setTextColor(...darkBlue);
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text('Your FOMO Profile', 20, 30);
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            const profileLines = doc.splitTextToSize(quizResult.description, 170);
            doc.text(profileLines, 20, 50);
            
            // Recommendations
            doc.setTextColor(...darkBlue);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('Your Personalized Action Plan', 20, 100);
            
            let yPosition = 120;
            quizResult.recommendations.forEach((rec, index) => {
                doc.setTextColor(...blue);
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.text(`${index + 1}. ${rec.title}`, 20, yPosition);
                
                doc.setTextColor(0, 0, 0);
                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                const descLines = doc.splitTextToSize(rec.description, 160);
                doc.text(descLines, 25, yPosition + 10);
                
                yPosition += 30 + (descLines.length * 5);
            });
            
            // Save PDF
            doc.save('FOMO_Management_Guide.pdf');
            
            gtag('event', 'file_download', {
                'file_name': 'FOMO_Management_Guide.pdf',
                'file_extension': '.pdf'
            });
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            initQuiz();
            
            // Initialize MailerLite form
            fetch("https://assets.mailerlite.com/jsonp/1568323/forms/158237970273404824/takel");
        });
    </script>
</body>
</html>
