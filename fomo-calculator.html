<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOMO Score Test - Trading Psychology Tool</title>
    <meta name="description" content="Free educational tool to assess your FOMO (Fear of Missing Out) level in trading. Understand your behavioral patterns.">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXX');
    </script>

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f1419;
            color: #e7e9ea;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border-radius: 16px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .header p {
            font-size: 1.2em;
            color: #e0e7ff;
        }

        .disclaimer {
            background: #1e293b;
            border: 1px solid #334155;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .disclaimer h3 {
            color: #60a5fa;
            margin-bottom: 10px;
        }

        .disclaimer p {
            color: #94a3b8;
            font-size: 0.95em;
        }

        .question-container {
            background: #1e293b;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #334155;
        }

        .question {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #f1f5f9;
        }

        .progress {
            width: 100%;
            height: 8px;
            background: #334155;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #334155;
            border: 2px solid transparent;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .option:hover {
            background: #475569;
            border-color: #60a5fa;
            transform: translateY(-2px);
        }

        .option:active {
            transform: translateY(0);
        }

        .result-container {
            background: #1e293b;
            padding: 40px;
            border-radius: 16px;
            text-align: center;
            display: none;
            border: 2px solid #334155;
        }

        .score-display {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
            background: linear-gradient(135deg, #22c55e 0%, #3b82f6 50%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-label {
            font-size: 2em;
            margin-bottom: 20px;
            color: #60a5fa;
        }

        .score-description {
            font-size: 1.2em;
            line-height: 1.8;
            color: #cbd5e1;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }

        .share-btn {
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
            color: white;
        }

        .share-btn:hover {
            transform: translateY(-2px);
        }

        .share-twitter { background: #1DA1F2; }
        .share-linkedin { background: #0077B5; }

        .cta-section {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
        }

        .cta-section h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .cta-section p {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: #e0e7ff;
        }

        .cta-button {
            display: inline-block;
            background: #22c55e;
            color: white;
            padding: 15px 40px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .cta-button:hover {
            background: #16a34a;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        #data-consent {
            background: #1e293b;
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            border: 1px solid #334155;
        }

        #data-consent h3 {
            color: #60a5fa;
            margin-bottom: 15px;
        }

        #data-consent input[type="email"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #334155;
            background: #0f1419;
            color: #e7e9ea;
            border-radius: 6px;
            font-size: 1em;
        }

        #data-consent label {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            font-size: 0.95em;
            color: #94a3b8;
        }

        #data-consent input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 5px;
        }

        #data-consent button {
            background: #3b82f6;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
            margin-top: 15px;
        }

        #data-consent button:hover:not(:disabled) {
            background: #2563eb;
        }

        #data-consent button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .email-success {
            background: #22c55e;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }

        .footer {
            background: #0f1419;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 1px solid #1e293b;
        }

        .footer p {
            color: #64748b;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .footer-links {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
        }

        .footer-links a {
            color: #60a5fa;
            text-decoration: none;
            font-size: 0.9em;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: #93bbfc;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .question { font-size: 1.1em; }
            .option { padding: 15px; font-size: 1em; }
            .score-display { font-size: 3em; }
            .share-buttons { flex-direction: column; }
            .share-btn { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>FOMO Score Test</h1>
            <p>Understand how Fear of Missing Out affects your trading decisions</p>
        </div>

        <div class="disclaimer">
            <h3>Educational Purpose</h3>
            <p>This tool is designed for educational purposes only. It helps you understand common behavioral patterns in decision-making. Individual results may vary. This is not financial advice.</p>
        </div>

        <div id="quiz-container">
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="question-container">
                <h2 class="question" id="question-text"></h2>
                <div class="options" id="options-container"></div>
            </div>
        </div>

        <div class="result-container" id="result-container">
            <h2>Your FOMO Score</h2>
            <div class="score-display" id="score-display">0</div>
            <div class="score-label" id="score-label">Calculating...</div>
            <p class="score-description" id="score-description"></p>
            
            <div class="share-buttons">
                <a href="#" class="share-btn share-twitter" id="share-twitter" target="_blank">
                    Share on X
                </a>
                <a href="#" class="share-btn share-linkedin" id="share-linkedin" target="_blank">
                    Share on LinkedIn
                </a>
            </div>

            <div id="data-consent">
                <h3>Get Your Detailed FOMO Management Guide</h3>
                <p>Receive a personalized PDF guide with strategies to manage FOMO in your decision-making.</p>
                <input type="email" id="email" placeholder="Enter your email address" required>
                <label>
                    <input type="checkbox" id="consent-checkbox" required>
                    <span>I agree to receive educational content and understand this is not financial advice. View our <a href="https://www.schnitzleinconsulting.com/en/datenschutz" target="_blank" style="color: #60a5fa;">Privacy Policy</a></span>
                </label>
                <button id="submit-email" disabled>Get My Free Guide</button>
                <div class="email-success" id="email-success">
                    ✓ Success! Check your email for your FOMO Management Guide.
                </div>
            </div>

            <div class="cta-section">
                <h3>Ready for a Complete Psychology Assessment?</h3>
                <p>Discover all your trading psychology patterns with our comprehensive assessment.</p>
                <a href="/assessment.html" class="cta-button">Take Full Assessment</a>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>© 2025 Schnitzlein Consulting - Educational Platform</p>
        <div class="footer-links">
            <a href="https://schnitzleinconsulting.com/impressum" target="_blank">Impressum</a>
            <a href="https://schnitzleinconsulting.com/datenschutz" target="_blank">Datenschutz</a>
            <a href="https://www.schnitzleinconsulting.com/en/datenschutz" target="_blank">Privacy Policy</a>
        </div>
    </footer>

    <script>
        // jsPDF setup
        window.jsPDF = window.jspdf.jsPDF;

        const questions = [
            {
                question: "You see a stock up 20%. Your immediate reaction:",
                options: [
                    { text: "Jump in immediately - can't miss this!", value: 25 },
                    { text: "Wait for a pullback entry", value: 10 },
                    { text: "Check the news and volume first", value: 5 },
                    { text: "Skip it - not in my plan", value: 0 }
                ]
            },
            {
                question: "Your trading friend just made $5,000 today. You feel:",
                options: [
                    { text: "Angry that I missed the same opportunity", value: 25 },
                    { text: "Curious about what they traded", value: 15 },
                    { text: "Happy for them, focusing on my trades", value: 5 },
                    { text: "Neutral - their trades don't affect me", value: 0 }
                ]
            },
            {
                question: "Pre-market is showing big movers. You:",
                options: [
                    { text: "Already placing market orders", value: 25 },
                    { text: "Frantically scanning for entries", value: 20 },
                    { text: "Waiting for the market to settle", value: 10 },
                    { text: "Sticking to my planned watchlist", value: 0 }
                ]
            },
            {
                question: "You missed a 50% runner you were watching. Next move:",
                options: [
                    { text: "Find similar stocks to chase", value: 25 },
                    { text: "Double my next position to recover", value: 20 },
                    { text: "Feel frustrated but stay disciplined", value: 10 },
                    { text: "Journal why I missed it for next time", value: 0 }
                ]
            },
            {
                question: "Social media shows everyone making gains. You:",
                options: [
                    { text: "Feel like a failure", value: 25 },
                    { text: "Start overtrading to catch up", value: 20 },
                    { text: "Question if my strategy works", value: 15 },
                    { text: "Stay off social during market hours", value: 0 }
                ]
            },
            {
                question: "The market gaps up big. Your approach:",
                options: [
                    { text: "Buy everything that's moving", value: 25 },
                    { text: "Enter positions without stops", value: 20 },
                    { text: "Wait 30 minutes before trading", value: 5 },
                    { text: "Trade only my prepared setups", value: 0 }
                ]
            },
            {
                question: "Rate your overall FOMO level (1 = low, 10 = high):",
                options: [
                    { text: "8-10 (Very High)", value: 25 },
                    { text: "6-7 (High)", value: 15 },
                    { text: "4-5 (Moderate)", value: 10 },
                    { text: "1-3 (Low)", value: 5 }
                ]
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answers = [];

        function startQuiz() {
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question-text').textContent = `Question ${currentQuestion + 1} of ${questions.length}: ${question.question}`;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option.text;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            updateProgressBar();
        }

        function selectOption(optionIndex) {
            const question = questions[currentQuestion];
            const selectedOption = question.options[optionIndex];
            score += selectedOption.value;
            
            answers.push({
                question: question.question,
                answer: selectedOption.text,
                score: selectedOption.value
            });
            
            gtag('event', 'quiz_answer', {
                'event_category': 'FOMO Quiz',
                'event_label': `Q${currentQuestion + 1}`,
                'value': selectedOption.value
            });
            
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function showResult() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'block';
            
            let category, label, description, color;
            
            if (score <= 35) {
                category = "FOMO Master";
                label = "Exceptional Discipline! 🧘";
                description = "You have remarkable control over your emotions. Your disciplined approach helps you avoid impulsive decisions. Only about 5% of people score this low. Keep up the excellent work!";
                color = "#22c55e";
            } else if (score <= 70) {
                category = "FOMO Fighter";
                label = "Good Awareness! 💪";
                description = "You're aware of FOMO and actively work to manage it. While you occasionally feel the pressure, you generally maintain good discipline. Continue developing your emotional awareness.";
                color = "#3b82f6";
            } else if (score <= 105) {
                category = "FOMO Challenger";
                label = "Room for Improvement ⚠️";
                description = "FOMO significantly influences your decisions. You often feel pressure to act on opportunities, which can lead to impulsive choices. Focus on developing a structured approach.";
                color = "#f59e0b";
            } else {
                category = "FOMO Vulnerable";
                label = "High Risk Level 🚨";
                description = "FOMO strongly drives your decision-making. This pattern often leads to poor timing and emotional choices. Understanding and managing this tendency is crucial for improvement.";
                color = "#ef4444";
            }
            
            document.getElementById('score-display').textContent = score;
            document.getElementById('score-display').style.color = color;
            document.getElementById('score-label').textContent = label;
            document.getElementById('score-description').textContent = description;
            
            // Update share links
            const shareText = `I scored ${score} on the FOMO Trading Test - I'm a ${category}! Test your FOMO level:`;
            const shareUrl = window.location.href;
            
            document.getElementById('share-twitter').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
            document.getElementById('share-linkedin').href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareUrl)}`;
            
            gtag('event', 'quiz_complete', {
                'event_category': 'FOMO Quiz',
                'event_label': category,
                'value': score
            });
            
            // Store result for PDF generation
            window.quizResult = {
                score: score,
                category: category,
                label: label,
                description: description,
                answers: answers
            };
        }

        // Email submission handling
        document.getElementById('consent-checkbox').addEventListener('change', function() {
            document.getElementById('submit-email').disabled = !this.checked;
        });

        document.getElementById('submit-email').addEventListener('click', async function() {
            const email = document.getElementById('email').value;
            const consent = document.getElementById('consent-checkbox').checked;
            
            if (!email || !consent) return;
            
            this.disabled = true;
            this.textContent = 'Processing...';
            
            // Generate PDF first
            generatePDF(email);
            
            // Send to MailerLite
            try {
                const response = await fetch('https://connect.mailerlite.com/api/subscribers', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'Authorization': 'Bearer YOUR_MAILERLITE_API_KEY'
                    },
                    body: JSON.stringify({
                        email: email,
                        groups: ['YOUR_FOMO_GROUP_ID'],
                        fields: {
                            fomo_score: window.quizResult.score,
                            tool: 'fomo_calculator',
                            consent: new Date().toISOString()
                        }
                    })
                });
                
                if (response.ok || response.status === 409) {
                    document.getElementById('email-success').style.display = 'block';
                    this.style.display = 'none';
                    
                    gtag('event', 'email_signup', {
                        'event_category': 'FOMO Quiz',
                        'event_label': 'Success'
                    });
                    
                    setTimeout(() => {
                        if (confirm('Would you like to take the complete Trading Psychology Assessment?')) {
                            window.location.href = '/assessment.html';
                        }
                    }, 3000);
                }
            } catch (error) {
                console.error('Email submission error:', error);
                alert('There was an error. Please try again.');
                this.disabled = false;
                this.textContent = 'Get My Free Guide';
            }
        });

        function generatePDF(email) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Colors
            const primaryColor = [59, 130, 246]; // Blue
            const textColor = [30, 41, 59];
            const lightGray = [148, 163, 184];
            
            // Header
            doc.setFillColor(...primaryColor);
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text('FOMO Management Guide', 105, 25, { align: 'center' });
            
            // Score section
            doc.setFillColor(241, 245, 249);
            doc.rect(20, 50, 170, 30, 'F');
            
            doc.setTextColor(...textColor);
            doc.setFontSize(16);
            doc.text(`Your FOMO Score: ${window.quizResult.score}`, 30, 65);
            doc.setFontSize(14);
            doc.text(`Category: ${window.quizResult.category}`, 30, 73);
            
            // Introduction
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            let yPos = 95;
            
            doc.text('Understanding FOMO in Trading', 20, yPos);
            doc.setFontSize(10);
            yPos += 10;
            
            const introText = 'Fear of Missing Out (FOMO) is one of the most destructive emotions in trading. It causes traders to chase moves, enter positions without proper analysis, and abandon their trading plans.';
            const introLines = doc.splitTextToSize(introText, 170);
            doc.text(introLines, 20, yPos);
            yPos += introLines.length * 5 + 10;
            
            // 5 Management Techniques
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('5 Practical FOMO Management Techniques', 20, yPos);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            yPos += 10;
            
            const techniques = [
                {
                    title: '1. The 30-Minute Rule',
                    text: 'Never enter a trade in the first 30 minutes of market open. This simple rule helps you avoid gap-and-go FOMO trades.'
                },
                {
                    title: '2. Watchlist Discipline',
                    text: 'Create your watchlist the night before. Only trade stocks on your list. This prevents chasing random movers.'
                },
                {
                    title: '3. The Missed Trade Journal',
                    text: 'Document every "missed" opportunity. Review monthly - you\'ll find most would have been losers.'
                },
                {
                    title: '4. Position Size Limits',
                    text: 'When feeling FOMO, trade 50% of normal size. This keeps you in the game while limiting damage.'
                },
                {
                    title: '5. Social Media Boundaries',
                    text: 'No social media during market hours. Others\' gains are not your losses. Focus on your own plan.'
                }
            ];
            
            techniques.forEach(technique => {
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                }
                
                doc.setFont(undefined, 'bold');
                doc.text(technique.title, 20, yPos);
                doc.setFont(undefined, 'normal');
                yPos += 6;
                
                const lines = doc.splitTextToSize(technique.text, 170);
                doc.text(lines, 20, yPos);
                yPos += lines.length * 5 + 8;
            });
            
            // Your answers summary
            doc.addPage();
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('Your Assessment Summary', 20, 30);
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            yPos = 45;
            
            window.quizResult.answers.forEach((answer, index) => {
                if (yPos > 270) {
                    doc.addPage();
                    yPos = 20;
                }
                
                doc.setFont(undefined, 'bold');
                doc.text(`Q${index + 1}: ${answer.question}`, 20, yPos);
                doc.setFont(undefined, 'normal');
                yPos += 6;
                doc.text(`Your answer: ${answer.answer}`, 20, yPos);
                yPos += 10;
            });
            
            // Next steps
            if (yPos > 200) {
                doc.addPage();
                yPos = 30;
            } else {
                yPos += 20;
            }
            
            doc.setFillColor(...primaryColor);
            doc.rect(20, yPos - 10, 170, 60, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text('Ready for Complete Psychology Analysis?', 105, yPos + 5, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const ctaText = 'This FOMO assessment is just one aspect of trading psychology. Get a complete analysis of all your trading patterns with our comprehensive assessment.';
            const ctaLines = doc.splitTextToSize(ctaText, 150);
            doc.text(ctaLines, 105, yPos + 20, { align: 'center' });
            
            doc.text('Visit: schnitzleinconsulting.com/assessment', 105, yPos + 45, { align: 'center' });
            
            // Footer
            doc.setTextColor(...lightGray);
            doc.setFontSize(8);
            doc.text('Educational content only. Not financial advice.', 105, 290, { align: 'center' });
            
            // Save PDF
            doc.save(`FOMO_Score_${window.quizResult.score}_Guide.pdf`);
        }

        // Start the quiz
        startQuiz();
    </script>
</body>
</html>
